<!doctype html>
<html lang="ar" dir="rtl">

<head>
  <!-- 
      ============================================
      ูุณู ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ ุงูุฃุณุงุณูุฉ ูุงูููุชุงุฏุงุชุง
      ============================================
      - ุชุนุฑูู ููุน ุงููุณุชูุฏ HTML5
      - ุชุนููู ุงููุบุฉ ููุนุฑุจูุฉ ูุงุชุฌุงู ุงููุต ูู ุงููููู ูููุณุงุฑ
      - ุชุนุฑูู ุชุฑููุฒ ุงููุญุงุฑู UTF-8 ูุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ
      - ุนููุงู ุงูุตูุญุฉ ูุน ุฎุงุตูุฉ data-lang ููุชุฑุฌูุฉ
    -->
  <meta charset="UTF-8" />
  <title data-lang="app_title">ูุธุงู ุงููุงุฑุณ ููุฏูููุฑ | CRM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 
      ============================================
      ุฑูุงุจุท ููุชุจุงุช ุงูุฎุทูุท ุงูุฎุงุฑุฌูุฉ
      ============================================
      - ุฎุท Cairo ููุนุฑุจูุฉ ูุน ุฃูุฒุงู ูุฎุชููุฉ
      - ุฎุท Roboto ููุฅูุฌููุฒูุฉ ูุน ุฃูุฒุงู ูุฎุชููุฉ
      - ููุชุจุฉ Font Awesome ููุฃููููุงุช
    -->
  <link
    href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;600;700&family=Roboto:wght@300;500;700&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- 
      ============================================
      ุฑูุงุจุท ูููุงุช ุงูุฃููุงุท ุงูุฏุงุฎููุฉ
      ============================================
      - style.css: ุงูุฃููุงุท ุงูุฑุฆูุณูุฉ ููุชุทุจูู
      - invoice.css: ุฃููุงุท ุฎุงุตุฉ ุจุฅูุดุงุก ุงูููุงุชูุฑ
    -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="invoice.css" />

  <!-- 
      ============================================
      ููุชุจุงุช JavaScript ุงูุฎุงุฑุฌูุฉ
      ============================================
      - Chart.js: ูุฅูุดุงุก ุงูุฑุณูู ุงูุจูุงููุฉ ูุงูุฅุญุตุงุฆูุงุช
      - html2pdf.js: ูุชุญููู HTML ุฅูู PDF ูุชูุฒูู ุงูููุงุชูุฑ
    -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
  <div id="login-overlay">
    <div class="login-box">
      <div class="logo-area" style="margin-bottom: 20px">
        <h2 style="color: #fff; margin-top: 10px">ุงูููููุงุฑุณ</h2>
      </div>
      <p style="color: #ccc; margin-bottom: 15px">
        ุงููุธุงู ูุญููุ ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ
      </p>

      <div class="input-group" style="margin-bottom: 20px">
        <input type="password" id="admin-pass" placeholder="Password"
          onkeyup="if (event.key === 'Enter') checkLogin();" />
      </div>

      <button class="primary-btn gold" onclick="checkLogin()" style="width: 100%">
        <i class="fas fa-unlock"></i> ุฏุฎูู ุขูู
      </button>
      <p id="login-error" style="color: #e74c3c; margin-top: 10px; display: none"></p>
    </div>
  </div>
  <!-- 
      ============================================
      ุงูุดุฑูุท ุงูุฌุงูุจู (Sidebar)
      ============================================
    -->
  <aside class="sidebar">
    <div class="logo-area">
      <span data-lang="company_name">ุงูููููุงุฑุณ </span>
    </div>
    <!-- 
          ูุงุฆูุฉ ุงูุชุตูุญ ุงูุฌุงูุจูุฉ
          =======================
          - ุชุญุชูู ุนูู ุฑูุงุจุท ุงูุฃูุณุงู ุงููุฎุชููุฉ
          - ูุชู ุชูุนูู ุงูุฑุงุจุท ุงููุดุท ุชููุงุฆููุง
        -->
    <div class="side-nav">
      <!-- ุฑุงุจุท ููุญุฉ ุงูุชุญูู (ุงูุฑุฆูุณูุฉ/ุงูุงุญุตุงุฆูุงุช) -->
      <a href="#" class="active" onclick="showSection('dashboard-section', this)">
        <i class="fas fa-chart-line"></i>
        <span data-lang="nav_dashboard">ุงูุงุญุตุงุฆูุงุช</span>
      </a>

      <!-- ุฑุงุจุท ุฅุฏุงุฑุฉ ุงูุนููุงุก -->
      <a href="#" onclick="showSection('customer-section', this)">
        <i class="fas fa-users"></i>
        <span data-lang="nav_customers">ุงูุนููุงุก</span>
      </a>

      <!-- ุฑุงุจุท ุงูุขูุฉ ุงูุญุงุณุจุฉ -->
      <a href="#" onclick="showSection('calc-section', this)">
        <i class="fas fa-calculator"></i>
        <span data-lang="nav_calculator">ุงูุญุงุณุจุฉ</span>
      </a>

      <!-- ุฑุงุจุท ุงููุชุงุจุนุฉ -->
      <a href="#" onclick="showSection('tracking-section', this)">
        <i class="fas fa-tasks"></i>
        <span data-lang="nav_tracking">ุงููุชุงุจุนุฉ</span>
      </a>
    </div> <!-- ุฒุฑ ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ
    - ูู ุฒุฑ ูุณุชุฏุนู ุฏุงูุฉ changeLanguage ูุน ููุฏ ุงููุบุฉ
    -->
    <div class="lang-switch">
      <button onclick="changeLanguage('ar')">ุนุฑุจู</button>

      <button onclick="changeLanguage('en')">English</button>
    </div>
    </nav>
  </aside>

  <!-- 
      ============================================
      ุงููุญุชูู ุงูุฑุฆูุณู ููุชุทุจูู
      ============================================
    
    -->
  <main class="main-content">
    <!-- Mobile Header (Visible only on small screens) -->
    <div id="mobile-header" class="mobile-only-header glass no-print">
      <div class="logo-area-mobile">
        <h2>AL FARIS</h2>
      </div>
      <div class="lang-switch-mobile">
        <button onclick="changeLanguage('ar')">ุน</button>
        <button onclick="changeLanguage('en')">En</button>
      </div>
    </div>

    <!-- 
        ============================================
        ูุณู ุงูุฅุญุตุงุฆูุงุช (Dashboard)
        ============================================
      -->
    <section id="dashboard-section" class="page-section active">
      <!-- 
          ุดุจูุฉ ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช
          ========================
        
        -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon gold">
            <i class="fas fa-money-bill-wave"></i>
          </div>
          <div class="stat-info">
            <h3 data-lang="total_sales">ุฅุฌูุงูู ุงููุจูุนุงุช</h3>
            <p id="total-sales-dash">
              0.00 <span data-lang="currency">ุฏ.ุฅ</span>
            </p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon green"><i class="fas fa-user-check"></i></div>
          <div class="stat-info">
            <h3 data-lang="clients_count">ุนุฏุฏ ุงูุนููุงุก</h3>
            <p id="active-clients-dash">0</p>
          </div>
        </div>
      </div>
      <!-- 
          ุตู ุงูุฑุณูู ุงูุจูุงููุฉ
          ===================
      
        -->
      <div class="charts-row">
        <div class="chart-box">
          <h3 data-lang="chart_orders">ูุฎุทุท ุงูุทูุจุงุช ุงูุดูุฑู</h3>
          <canvas id="ordersChart"></canvas>
        </div>
        <div class="chart-box">
          <h3 data-lang="chart_services">ุชูุฒูุน ุงูุฎุฏูุงุช</h3>
          <canvas id="servicesChart"></canvas>
        </div>
      </div>
      <!-- 
          ุฌุฏูู ุฃุญุฏุซ ุงูุนููุงุก
          ==================
       -->
      <div class="recent-activity glass">
        <h3 data-lang="recent_clients">ุฃุญุฏุซ ุนููุงุก</h3>
        <table>
          <thead>
            <tr>
              <th data-lang="th_date">ุงูุชุงุฑูุฎ</th>
              <th data-lang="th_name">ุงูุงุณู</th>
              <th data-lang="th_phone">ุงููุงุชู</th>
              <th data-lang="th_addr">ุงูุนููุงู</th>
            </tr>
          </thead>
          <tbody id="recent-customers-body"></tbody>
        </table>
      </div>
    </section>
    <!-- 
        ============================================
        ูุณู ุฅุฏุงุฑุฉ ุงูุนููุงุก
        ============================================
     -->
    <section id="customer-section" class="page-section">
      <div class="section-header">
        <!-- 
            ุญูู ุงูุจุญุซ ุนู ุงูุนููุงุก
            ======================
            - ุจุญุซ ุจุงูุงุณู ุฃู ุฑูู ุงููุงุชู
            - ูุณุชุฏุนู ุฏุงูุฉ searchCustomers ุฃุซูุงุก ุงููุชุงุจุฉ
          -->
        <input type="text" id="search-input" oninput="searchCustomers()" data-lang-ph="search_ph"
          placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู ุฑูู ุงููุงุชู..." />
      </div>

      <!-- 
          ูููุฐุฌ ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ
          =======================
    -->
      <div class="form-container">
        <div class="inputs-grid">
          <input type="text" id="cust-name" data-lang-ph="client_name_ph" placeholder="ุงุณู ุงูุนููู *" required />
          <div style="position: relative">
            <input type="tel" id="cust-phone" data-lang-ph="client_phone_ph" placeholder="ุฑูู ุงููุงุชู" dir="ltr"
              style="text-align: right" maxlength="10" />
            <small id="phone-feedback"></small>
          </div>
          <input type="text" id="cust-address" data-lang-ph="client_addr_ph" placeholder="ุงูุนููุงู (ุงุฎุชูุงุฑู)" />
          <input type="text" id="cust-notes" data-lang-ph="client_notes_ph" placeholder="ููุงุญุธุงุช" />
        </div>
        <!-- ุฒุฑ ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ -->
        <button id="btn-save-cust" class="primary-btn" onclick="saveCustomerLocal()" disabled
          data-lang="add_client_btn">
          ุฅุถุงูุฉ ุนููู
        </button>
      </div>

      <!-- 
          ุฌุฏูู ุนุฑุถ ุฌููุน ุงูุนููุงุก
          =======================
          - ูุนุฑุถ ุฌููุน ุงูุนููุงุก ุงููุณุฌููู
          - ูุญุชูู ุนูู ุฃุนูุฏุฉ: ุงูุฑูู ุงูุชุณูุณููุ ุงูุชุงุฑูุฎุ ุงูุงุณูุ ุงููุงุชูุ ุงูุนููุงู
        -->
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th data-lang="th_date">ุงูุชุงุฑูุฎ</th>
              <th data-lang="th_name">ุงูุงุณู</th>
              <th data-lang="th_phone">ุงููุงุชู</th>
              <th data-lang="th_addr">ุงูุนููุงู</th>
            </tr>
          </thead>
          <tbody id="customers-body"></tbody>
        </table>
      </div>
    </section>

    <!-- 
        ============================================
        ูุณู ุงูุญุงุณุจุฉ ุงูุฐููุฉ
        ============================================
    
      -->
    <section id="calc-section" class="page-section">
      <!-- 
          ุฃุฒุฑุงุฑ ุงูุชุจููุจุงุช
          ================
        -->
      <div class="tabs">
        <button class="tab-btn active" onclick="openTab(event, 'curtain-tab')" data-lang="tab_curtain">
          ุญุงุณุจุฉ ุงูุณุชุงุฆุฑ
        </button>
        <button class="tab-btn" onclick="openTab(event, 'carpet-tab')" data-lang="tab_carpet">
          ุญุงุณุจุฉ ุงูุณุฌุงุฏ
        </button>
        <button class="tab-btn" onclick="openTab(event, 'wall-tab')" data-lang="tab_wall">
          ุญุงุณุจุฉ ูุฑู ุงูุฌุฏุฑุงู
        </button>
      </div>

      <!-- 
          ============================================
          ุชุจููุจ ุญุงุณุจุฉ ุงูุณุชุงุฆุฑ
          ============================================
         
        -->
      <div id="curtain-tab" class="tab-content" style="display: block">
        <div id="curtain-calculator" class="calculator-wrapper">
          <!-- 
              ููุทูุฉ ุฅุถุงูุฉ ุงูุณุชุงุฆุฑ
              ====================
              - ูููู ุฅุถุงูุฉ ุนุฏุฉ ุณุชุงุฆุฑ
              - ูู ุณุชุงุฑุฉ ููุง ุจุทุงูุฉ ุฎุงุตุฉ
            -->
          <div id="curtains-wrapper">
            <div class="curtain-card" data-curtain-id="1">
              <!-- 
                  ูุนูููุงุช ุงูุณุชุงุฑุฉ ุงูุฃุณุงุณูุฉ
                  =========================
                -->
              <div class="inputs-grid" style="margin-bottom: 10px">
                <input type="text" class="c-room-name" placeholder="ุงุณู ุงูุบุฑูุฉ (ูุซุงู: ูุฌูุณุ ุตุงูุฉ)" />
              </div>
              <div class="inputs-grid">
                <input type="number" class="c-width" required data-lang-ph="ph_width" placeholder="ุนุฑุถ ุงูุณุชุงุฑุฉ (ุณู)" />
                <input type="number" class="c-height" required data-lang-ph="ph_height"
                  placeholder="ุงุฑุชูุงุน ุงูุณุชุงุฑุฉ (ุณู)" />
                <input type="number" class="c-sewing-price" required data-lang-ph="ph_sewing"
                  placeholder="ุณุนุฑ ุงูุฎูุงุทุฉ" />
              </div>
              <div class="inputs-grid">
                <input type="number" class="c-tassel-price" data-lang-ph="ph_tassel" placeholder="ุณุนุฑ ุงูุทุฑุจูุด" />
                <input type="number" class="c-side-hold" data-lang-ph="ph_sidehold" placeholder="ุณุนุฑ ุงููุณูุฉ" />
                <input type="number" class="c-hook" data-lang-ph="ph_hook" placeholder="ุณุนุฑ ุงููุฑุจุท" />
              </div>

              <!-- 
                  ููุทูุฉ ุงูุทุจูุงุช ููุณุชุงุฑุฉ
                  =======================
                  - ูููู ุฅุถุงูุฉ ุนุฏุฉ ุทุจูุงุช ููุณุชุงุฑุฉ ุงููุงุญุฏุฉ
                  - ูู ุทุจูุฉ ููุง: ุงุณูุ ุนุฑุถ ููุงุดุ ุณุนุฑ ููุงุดุ ูุณุจุฉ ุงููุฑูุดุฉ
                  - ููุน ุงูุฑูู: ุนุงุฏูุ ููููุ ุฃูุฑูููุ ุฑููุงูู
                -->
              <div class="layers-wrapper">
                <div class="layer-card" data-layer-id="1">
                  <h4 data-lang="layer_1">ุทุจูุฉ 1</h4>
                  <div class="inputs-grid">
                    <input type="text" class="l-name" required data-lang-ph="ph_layer_name" placeholder="ุงุณู ุงูุทุจูุฉ" />
                    <input type="number" class="l-fab-width" required data-lang-ph="ph_fab_width"
                      placeholder="ุนุฑุถ ุงูููุงุด" />
                    <input type="number" class="l-fab-price" required data-lang-ph="ph_fab_price"
                      placeholder="ุณุนุฑ ุงูููุงุด" />
                    <input type="number" class="l-gather" required data-lang-ph="ph_gather" placeholder="ุงููุฑูุดุฉ" />
                  </div>
                  <div class="inputs-grid">
                    <select class="l-rail-type" required>
                      <option value="" data-lang="sel_rail_type">
                        ููุน ุงูุฑูู *
                      </option>
                      <option value="ุฑูู ุนุงุฏู">Normal Rail</option>
                      <option value="ุฑูู ูููู">Wave Rail</option>
                      <option value="ุฑูู ุงูุฑููู">American Rail</option>
                      <option value="ุฑูู ุฑููุงูู">Roman Rail</option>
                    </select>
                    <input type="number" class="l-rail-price" required data-lang-ph="ph_rail_price"
                      placeholder="ุณุนุฑ ุงูุฑูู" />
                  </div>
                  <!-- 
                      ุฃุฒุฑุงุฑ ุฅุฏุงุฑุฉ ุงูุทุจูุงุช
                      ===================
                      - ุฅุถุงูุฉ ุทุจูุฉ ุฌุฏูุฏุฉ
                      - ุญุฐู ุงูุทุจูุฉ ุงูุญุงููุฉ
                    -->
                  <div class="layer-actions">
                    <button class="secondary-btn" onclick="
                          addLayer(
                            this.closest('.curtain-card').dataset.curtainId,
                          )
                        " data-lang="btn_add_layer">
                      ุฅุถุงูุฉ ุทุจูุฉ
                    </button>
                    <button class="danger-btn" onclick="removeLayer(this)" data-lang="btn_del_layer">
                      ุญุฐู ุงูุทุจูุฉ
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 
              ููุทูุฉ ูุนุงููุฉ ุงูุญุณุงุจ ููุณุชุงุฆุฑ
              =============================
              - ุนุฑุถ ุฌุฏูู ุจููุฎุต ุงูุญุณุงุจ
              - ุนุฑุถ ุงูุฅุฌูุงูู ุงูููู
            -->
          <div id="quick-preview-area" class="preview-container glass" style="display: none">
            <h3 class="preview-title">
              <i class="fas fa-file-invoice-dollar"></i>
              <span data-lang="quick_preview">ูุนุงููุฉ ุงูุญุณุงุจ</span>
            </h3>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th data-lang="th_curtain">ุงูุณุชุงุฑุฉ</th>
                    <th data-lang="th_layers">ุงูุทุจูุงุช</th>
                    <th data-lang="th_total_fab">ุฅุฌูุงูู ุงูููุงุด</th>
                    <th data-lang="th_price_tax">ุงูุณุนุฑ (ูุน ุงูุถุฑูุจุฉ)</th>
                  </tr>
                </thead>
                <tbody id="preview-body"></tbody>
              </table>
            </div>
            <div class="preview-summary">
              <span data-lang="total_label">ุงูุฅุฌูุงูู ุงูููู:</span>
              <strong id="preview-grand-total">0.00</strong>
              <span data-lang="currency">ุฏ.ุฅ</span>
            </div>
          </div>

          <!-- 
              ููุทูุฉ ุฑุจุท ุงูุนููู ุจุงููุงุชูุฑุฉ (ููุณุชุงุฆุฑ)
              =====================================
              - ุงูุจุญุซ ุนู ุนููู ููุฌูุฏ ุจุฑูู ุงููุงุชู
              - ุนุฑุถ ุงูุนููู ุงููุฎุชุงุฑ
              - ุฅููุงููุฉ ุชุบููุฑ ุงูุนููู
            -->
          <div id="customer-linking-area" class="linking-section glass" style="display: none; margin-top: 20px">
            <!-- ุจุทุงูุฉ ุงูุนููู ุงููุฎุชุงุฑ -->
            <div id="selected-client-card" class="selected-client-box" style="display: none">
              <div class="client-info">
                <span class="icon"><i class="fas fa-user-check"></i></span>
                <div>
                  <h4 id="selected-client-name">---</h4>
                  <p id="selected-client-phone">---</p>
                </div>
              </div>
              <button class="change-btn" onclick="resetClientSelection()" data-lang="btn_change">
                ุชุบููุฑ
              </button>
            </div>
            <!-- 
                ุตูุฏูู ุงูุจุญุซ ุนู ุนููู
                =====================
                - ุงูุจุญุซ ุจุฑูู ุงููุงุชู
                - ุนุฑุถ ูุชุงุฆุฌ ุงูุจุญุซ ูู ูุงุฆูุฉ ููุณุฏูุฉ
              -->
            <div id="search-box-container" class="search-container">
              <label style="
                    display: block;
                    margin-bottom: 10px;
                    color: var(--gold);
                  " data-lang="search_client_label">๐ค ููู ูุฐู ุงููุงุชูุฑุฉุ</label>
              <div class="search-wrapper" style="position: relative">
                <input type="tel" id="client-search-input" dir="ltr" style="text-align: right" placeholder="05xxxxxxxx"
                  oninput="handlePhoneSearch(this.value)" />
                <div id="search-results-dropdown" class="dropdown-list"></div>
              </div>
            </div>
            <!-- 
                ุฒุฑ ุญูุธ ุงููุนุงููุฉ
                =================
                - ูุญูุธ ุงููุงุชูุฑุฉ ูู ููู ุงูุนููู ุงููุฎุชุงุฑ
                - ูููู ูุนุทูุงู ุญุชู ูุชู ุงุฎุชูุงุฑ ุนููู
              -->
            <div class="final-actions" style="margin-top: 20px; text-align: left">
              <button id="btn-save-transaction" class="primary-btn" disabled onclick="saveTransactionToSheet()"
                style="background-color: #2ecc71">
                <i class="fas fa-save"></i>
                <span data-lang="btn_save_sheet">ุญูุธ ูู ููู ุงูุนููู</span>
              </button>
            </div>
          </div>

          <!-- 
              ุฃุฒุฑุงุฑ ุงูุชุญูู ุงูุฑุฆูุณูุฉ (ููุณุชุงุฆุฑ)
              =================================
              - ุฅุถุงูุฉ ุณุชุงุฑุฉ ุฌุฏูุฏุฉ
              - ุญุณุงุจ ุงูุณุนุฑ
              - ุชูุฒูู ุงูููุชูุดู (PDF)
            -->
          <div class="actions-row">
            <button class="secondary-btn" onclick="addCurtain()" data-lang="btn_add_curtain">
              ุฅุถุงูุฉ ุณุชุงุฑุฉ
            </button>
            <button class="primary-btn" onclick="calculateCurtains()" data-lang="btn_calc">
              ุงุญุณุจ ุงูุณุนุฑ
            </button>
            <button class="primary-btn gold" onclick="generateProInvoice('curtain')" data-lang="btn_download">
              ุชูุฒูู ุงูููุชูุดู
            </button>
          </div>
        </div>
      </div>

      <!-- 
          ============================================
          ุชุจููุจ ุญุงุณุจุฉ ุงูุณุฌุงุฏ
          ============================================
      
        -->
      <div id="carpet-tab" class="tab-content" style="display: none">
        <div class="calculator-wrapper">
          <h2 class="section-title" data-lang="title_carpet"></h2>

          <!-- 
              ูููุฐุฌ ุฅุถุงูุฉ ุบุฑูุฉ/ุณุฌุงุฏุฉ
              ========================
              - ุงุณู ุงูุบุฑูุฉ
              - ุนุฑุถ ุงูุณุฌุงุฏุฉ
              - ุทูู ุงูุณุฌุงุฏุฉ
              - ุณุนุฑ ุงููุชุฑ
            -->
          <div class="calc-card">
            <h3 data-lang="add_carpet_room">ุฅุถุงูุฉ ุบุฑูุฉ / ุณุฌุงุฏุฉ</h3>
            <div class="inputs-grid">
              <input type="text" id="carpet-room-name" data-lang-ph="ph_room_name" placeholder="ุงุณู ุงูุบุฑูุฉ" required />
              <input type="number" id="carpet-width" data-lang-ph="ph_width" placeholder="ุงูุนุฑุถ" step="0.01" />
              <input type="number" id="carpet-length" data-lang-ph="ph_length" placeholder="ุงูุทูู" step="0.01" />
              <input type="number" id="carpet-price" data-lang-ph="ph_meter_price" placeholder="ุณุนุฑ ุงููุชุฑ"
                step="0.01" />
            </div>
            <!-- ุฒุฑ ุญุณุงุจ ูุฅุถุงูุฉ ุงูุบุฑูุฉ -->
            <button class="secondary-btn" onclick="addCarpetRoom()" style="margin-top: 15px; width: 100%"
              data-lang="btn_calc_add">
              ุญุณุงุจ ูุฅุถุงูุฉ
            </button>
          </div>

          <!-- 
              ููุทูุฉ ูุนุงููุฉ ุงูุณุฌุงุฏ
              =====================
              - ุฌุฏูู ุจุฌููุน ุงูุบุฑู ุงููุถุงูุฉ
              - ุนุฑุถ ุงููุณุงุญุฉ ูุณุนุฑ ุงููุชุฑ ูุงูุฅุฌูุงูู
              - ุฅููุงููุฉ ุญุฐู ุฃู ุณุฌุงุฏุฉ
            -->
          <div id="carpet-preview-area" class="preview-container glass" style="display: none">
            <h3 class="preview-title" data-lang="room_details">
              ุชูุงุตูู ุงูุบุฑู
            </h3>
            <div class="table-container">
              <table id="carpet-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th data-lang="th_room">ุงูุบุฑูุฉ</th>
                    <th data-lang="th_area">ุงููุณุงุญุฉ</th>
                    <th data-lang="th_m_price">ุณุนุฑ ุงููุชุฑ</th>
                    <th data-lang="th_total">ุงูุฅุฌูุงูู</th>
                    <th data-lang="th_action">ุญุฐู</th>
                  </tr>
                </thead>
                <tbody id="carpet-body"></tbody>
              </table>
            </div>
            <div class="preview-summary">
              <span data-lang="total_label">ุงูุฅุฌูุงูู ุงูููุงุฆู:</span>
              <strong id="carpet-grand-total">0.00</strong>
              <span data-lang="currency">ุฏ.ุฅ</span>
            </div>
          </div>

          <!-- 
              ููุทูุฉ ุฑุจุท ุงูุนููู ุจูุงุชูุฑุฉ ุงูุณุฌุงุฏ
              =================================
              - ููุณ ูุจุฏุฃ ุฑุจุท ุงูุนููู ูู ูุณู ุงูุณุชุงุฆุฑ
              - ูุฎุตุต ููุนุงููุงุช ุงูุณุฌุงุฏ
            -->
          <div id="carpet-linking-area" class="linking-section glass" style="display: none; margin-top: 20px">
            <!-- ุจุทุงูุฉ ุงูุนููู ุงููุฎุชุงุฑ ููุณุฌุงุฏ -->
            <div id="carpet-selected-client-card" class="selected-client-box" style="display: none">
              <div class="client-info">
                <span class="icon"><i class="fas fa-user-check"></i></span>
                <div>
                  <h4 id="carpet-client-name">---</h4>
                  <p id="carpet-client-phone">---</p>
                </div>
              </div>
              <button class="change-btn" onclick="resetCarpetClientSelection()" data-lang="btn_change">
                ุชุบููุฑ
              </button>
            </div>
            <!-- ุตูุฏูู ุงูุจุญุซ ุนู ุนููู ููุณุฌุงุฏ -->
            <div id="carpet-search-box-container" class="search-container">
              <label style="
                    display: block;
                    margin-bottom: 10px;
                    color: var(--gold);
                  " data-lang="search_client_label">๐ค ููู ุงููุงุชูุฑุฉุ</label>
              <div class="search-wrapper" style="position: relative">
                <input type="tel" id="carpet-search-input" dir="ltr" style="text-align: right" placeholder="05xxxxxxxx"
                  oninput="handleCarpetSearch(this.value)" />
                <div id="carpet-search-results" class="dropdown-list"></div>
              </div>
            </div>
            <!-- ุฒุฑ ุญูุธ ูุงุชูุฑุฉ ุงูุณุฌุงุฏ -->
            <div class="final-actions" style="margin-top: 20px; text-align: left">
              <button id="btn-save-carpet" class="primary-btn" disabled onclick="saveCarpetTransaction()"
                style="background-color: #2ecc71">
                <i class="fas fa-save"></i>
                <span data-lang="btn_save_sheet">ุญูุธ ุงููุงุชูุฑุฉ</span>
              </button>
            </div>
          </div>

          <!-- 
              ุฃุฒุฑุงุฑ ุงูุชุญูู ุงูุฑุฆูุณูุฉ (ููุณุฌุงุฏ)
              =================================
              - ุฅุถุงูุฉ ููุงุณ ุฌุฏูุฏ
              - ุญุณุงุจ ุงูุณุนุฑ
              - ุชูุฒูู ุงูููุชูุดู (PDF)
            -->
          <div class="actions-row" style="
                margin-top: 30px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                padding-top: 20px;
              ">
            <button class="secondary-btn" onclick="
                  document.getElementById('carpet-room-name').focus();
                  window.scrollTo(0, 0);
                " data-lang="btn_add_measure">
              ุฅุถุงูุฉ ููุงุณ
            </button>
            <button class="primary-btn" onclick="renderCarpetTable()" data-lang="btn_calc">
              ุงุญุณุจ ุงูุณุนุฑ
            </button>
            <button class="primary-btn gold" onclick="generateProInvoice('carpet')" data-lang="btn_download">
              ุชูุฒูู ุงูููุชูุดู
            </button>
          </div>
        </div>
      </div>

      <!-- 
          ============================================
          ุชุจููุจ ุญุงุณุจุฉ ูุฑู ุงูุฌุฏุฑุงู
          ============================================
        
        -->
      <div id="wall-tab" class="tab-content" style="display: none">
        <div class="calculator-wrapper">
          <h2 class="section-title" data-lang="title_wall"></h2>

          <!-- 
              ูููุฐุฌ ุจูุงูุงุช ุงูุบุฑูุฉ ูุงูุฑูู
              ============================
              - ุงุณู ุงูุบุฑูุฉ
              - ุงุฑุชูุงุน ุงูุฌุฏุงุฑ
              - ุนุฑุถ ุงูุฑูู
              - ุทูู ุงูุฑูู
              - ุงูุชูุฑุงุฑ (Repeat)
              - ุณุนุฑ ุงูุฑูู
            -->
          <div class="calc-card">
            <h3 data-lang="room_roll_data">ุจูุงูุงุช ุงูุบุฑูุฉ ูุงูุฑูู</h3>
            <div class="inputs-grid">
              <input type="text" id="wall-room-name" data-lang-ph="ph_room_name" placeholder="ุงุณู ุงูุบุฑูุฉ" required />
              <input type="number" id="wall-height" data-lang-ph="ph_wall_height" placeholder="ุงุฑุชูุงุน ุงูุฌุฏุงุฑ"
                required />
            </div>
            <div class="inputs-grid" style="margin-top: 10px">
              <input type="number" id="roll-width" data-lang-ph="ph_roll_width" placeholder="ุนุฑุถ ุงูุฑูู" required />
              <input type="number" id="roll-length" data-lang-ph="ph_roll_length" placeholder="ุทูู ุงูุฑูู" required />
              <input type="number" id="roll-repeat" data-lang-ph="ph_roll_repeat" placeholder="ุงูุชูุฑุงุฑ (Repeat)"
                value="0" />
              <input type="number" id="roll-price" data-lang-ph="ph_roll_price" placeholder="ุณุนุฑ ุงูุฑูู" required />
            </div>

            <!-- 
                ููุทูุฉ ููุงุณุงุช ุงูุฌุฏุฑุงู
                ======================
                - ูููู ุฅุถุงูุฉ ุนุฏุฉ ุฌุฏุฑุงู ููู ุบุฑูุฉ
                - ูู ุฌุฏุงุฑ ูู ุงุณู ูุนุฑุถ
                - ุฅููุงููุฉ ุฅุถุงูุฉ ุฌุฏุงุฑ ุฌุฏูุฏ
              -->
            <div style="
                  background: rgba(0, 0, 0, 0.2);
                  padding: 15px;
                  border-radius: 8px;
                  margin-top: 15px;
                ">
              <h4 data-lang="walls_measure">ููุงุณุงุช ุงูุฌุฏุฑุงู</h4>
              <div id="walls-container">
                <div class="wall-row inputs-grid">
                  <input type="text" class="wall-name" placeholder="ุฌุฏุงุฑ 1" value="ุฌุฏุงุฑ 1" />
                  <input type="number" class="wall-width" data-lang-ph="ph_wall_width" placeholder="ุนุฑุถ ุงูุฌุฏุงุฑ" />
                  <button class="danger-btn remove-wall-btn" onclick="removeWallInput(this)" style="display: none">
                    ร
                  </button>
                </div>
              </div>
              <!-- ุฒุฑ ุฅุถุงูุฉ ุฌุฏุงุฑ ุฌุฏูุฏ -->
              <button class="secondary-btn" onclick="addWallInput()" style="width: auto; margin-top: 10px"
                data-lang="btn_add_wall">
                + ุฌุฏุงุฑ ุขุฎุฑ
              </button>
            </div>
            <!-- ุฒุฑ ุญุณุงุจ ุนุฏุฏ ุงูุฑููุงุช -->
            <button class="secondary-btn" onclick="calculateWallpaperRoom()" style="margin-top: 20px; width: 100%"
              data-lang="btn_calc_roll">
              ุญุณุงุจ ุงูุฑููุงุช
            </button>
          </div>

          <!-- 
              ููุทูุฉ ูุนุงููุฉ ูุฑู ุงูุฌุฏุฑุงู
              ==========================
              - ุฌุฏูู ุจุฌููุน ุงูุบุฑู ุงููุถุงูุฉ
              - ุนุฏุฏ ุงูุฌุฏุฑุงู ูุฅุฌูุงูู ุงูุนุฑุถ ูุนุฏุฏ ุงูุฑููุงุช
              - ุฅููุงููุฉ ุญุฐู ุฃู ุบุฑูุฉ
            -->
          <div id="wall-preview-area" class="preview-container glass" style="display: none">
            <h3 class="preview-title" data-lang="room_details">ุงูุชูุงุตูู</h3>
            <div class="table-container">
              <table id="wall-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th data-lang="th_room">ุงูุบุฑูุฉ</th>
                    <th data-lang="th_walls_count">ุนุฏุฏ ุงูุฌุฏุฑุงู</th>
                    <th data-lang="th_total_width">ุฅุฌูุงูู ุงูุนุฑุถ</th>
                    <th data-lang="th_rolls_count">ุนุฏุฏ ุงูุฑููุงุช</th>
                    <th data-lang="th_total">ุงูุณุนุฑ</th>
                    <th data-lang="th_action">ุญุฐู</th>
                  </tr>
                </thead>
                <tbody id="wall-body"></tbody>
              </table>
            </div>
            <div class="preview-summary">
              <div style="
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 5px;
                  ">
                <span data-lang="total_rolls_label">ุฅุฌูุงูู ุงูุฑููุงุช:</span>
                <strong id="wall-total-rolls">0</strong>
              </div>
              <div style="
                    border-top: 1px solid rgba(255, 255, 255, 0.1);
                    padding-top: 10px;
                  ">
                <span data-lang="total_label">ุงูุฅุฌูุงูู ุงูููุงุฆู:</span>
                <strong id="wall-grand-total">0.00</strong> <span>ุฏ.ุฅ</span>
              </div>
            </div>
          </div>

          <!-- 
              ููุทูุฉ ุฑุจุท ุงูุนููู ุจูุงุชูุฑุฉ ูุฑู ุงูุฌุฏุฑุงู
              =====================================
              - ููุณ ูุจุฏุฃ ุฑุจุท ุงูุนููู ูู ุงูุฃูุณุงู ุงูุฃุฎุฑู
              - ูุฎุตุต ููุนุงููุงุช ูุฑู ุงูุฌุฏุฑุงู
            -->
          <div id="wall-linking-area" class="linking-section glass" style="display: none; margin-top: 20px">
            <!-- ุจุทุงูุฉ ุงูุนููู ุงููุฎุชุงุฑ ููุฑู ุงูุฌุฏุฑุงู -->
            <div id="wall-selected-client-card" class="selected-client-box" style="display: none">
              <div class="client-info">
                <span class="icon"><i class="fas fa-user-check"></i></span>
                <div>
                  <h4 id="wall-client-name">---</h4>
                  <p id="wall-client-phone">---</p>
                </div>
              </div>
              <button class="change-btn" onclick="resetWallClientSelection()" data-lang="btn_change">
                ุชุบููุฑ
              </button>
            </div>
            <!-- ุตูุฏูู ุงูุจุญุซ ุนู ุนููู ููุฑู ุงูุฌุฏุฑุงู -->
            <div id="wall-search-box-container" class="search-container">
              <label style="
                    display: block;
                    margin-bottom: 10px;
                    color: var(--gold);
                  " data-lang="search_client_label">๐ค ููู ุงููุงุชูุฑุฉุ</label>
              <div class="search-wrapper" style="position: relative">
                <input type="tel" id="wall-search-input" dir="ltr" placeholder="05xxxxxxxx" style="text-align: right"
                  oninput="handleWallSearch(this.value)" />
                <div id="wall-search-results" class="dropdown-list"></div>
              </div>
            </div>
            <!-- ุฒุฑ ุญูุธ ูุงุชูุฑุฉ ูุฑู ุงูุฌุฏุฑุงู -->
            <div class="final-actions" style="margin-top: 20px; text-align: left">
              <button id="btn-save-wall" class="primary-btn" disabled onclick="saveWallTransaction()"
                style="background-color: #2ecc71">
                <i class="fas fa-save"></i>
                <span data-lang="btn_save_sheet">ุญูุธ ุงููุงุชูุฑุฉ</span>
              </button>
            </div>
          </div>

          <!-- 
              ุฃุฒุฑุงุฑ ุงูุชุญูู ุงูุฑุฆูุณูุฉ (ููุฑู ุงูุฌุฏุฑุงู)
              =====================================
              - ุฅุถุงูุฉ ุบุฑูุฉ ุฌุฏูุฏุฉ
              - ุชูุฒูู ุงูููุชูุดู (PDF)
            -->
          <div class="actions-row" style="
                margin-top: 30px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                padding-top: 20px;
              ">
            <button class="secondary-btn" onclick="
                  document.getElementById('wall-room-name').focus();
                  window.scrollTo(0, 0);
                " data-lang="btn_new_room">
              ุบุฑูุฉ ุฌุฏูุฏุฉ
            </button>
            <button class="primary-btn gold" onclick="exportWallPDF()" data-lang="btn_download">
              ุชูุฒูู ุงูููุชูุดู
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- 
        ============================================
        ูุณู ุงููุชุงุจุนุฉ (Tracking)
        ============================================
        - ูุชุงุจุนุฉ ุญุงูุฉ ุงูุทูุจุงุช ูุงูุนููุงุก
        - ุชุตููุฉ ุงูุทูุจุงุช ุญุณุจ ุงูุญุงูุฉ
        - ุนุฑุถ ุฌููุน ุงูุทูุจุงุช ูู ุฌุฏูู
      -->
    <section id="tracking-section" class="page-section">
      <div class="section-header">
        <!-- 
            ุฃุฒุฑุงุฑ ุงูุชุตููุฉ ุญุณุจ ุญุงูุฉ ุงูุทูุจ
            ==============================
            - ุนุฑุถ ุงููู
            - ุนุฑุถ ุงูุทูุจุงุช ููุฏ ุงูุชูููุฐ
            - ุนุฑุถ ุงูุทูุจุงุช ุงูููุชููุฉ
          -->
        <div class="tracking-filters">
          <button class="filter-btn active" onclick="filterOrders('all')" data-lang="filter_all">
            ุงููู
          </button>
          <button class="filter-btn" onclick="filterOrders('pending')" data-lang="filter_pending">
            โณ ููุฏ ุงูุชูููุฐ
          </button>
          <button class="filter-btn" onclick="filterOrders('completed')" data-lang="filter_completed">
            โ ููุชูู
          </button>
        </div>
      </div>

      <!-- 
          ุฌุฏูู ูุชุงุจุนุฉ ุงูุทูุจุงุช
          =====================
          - ูุนุฑุถ ุฌููุน ุงูุทูุจุงุช ูุน ุชูุงุตูููุง
          - ุฃุนูุฏุฉ: ุฑูู ุงููุณูุณูุ ุงูุงุณูุ ุงููุงุชูุ ุงูุนููุงูุ ููุน ุงูุฎุฏูุฉุ ุงููุฏููุนุ ุงูุฅุฌูุงููุ ุงูุญุงูุฉ
        -->
      <div class="table-container">
        <table class="tracking-table">
          <thead>
            <tr>
              <th data-lang="th_id">ุฑูู ุงููุณูุณู</th>
              <th data-lang="th_name">ุงูุงุณู</th>
              <th data-lang="th_phone">ุฑูู ุงููุงุชู</th>
              <th data-lang="th_addr">ุงูุนููุงู</th>
              <th data-lang="th_type">ููุน ุงูุฎุฏูุฉ</th>
              <th data-lang="th_paid">ุงููุฏููุน</th>
              <th data-lang="th_total">ุงูุฅุฌูุงูู</th>
              <th data-lang="th_status">ุงูุญุงูุฉ</th>
            </tr>
          </thead>
          <tbody id="orders-body"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- 
      ============================================
      ูุงูุฐุฉ ุงูุฅุถุงูุฉ ุงูุณุฑูุนุฉ ููุนููู (Modal)
      ============================================
      - ุชุธูุฑ ุนูุฏ ุงูุถุบุท ุนูู ุฅุถุงูุฉ ุนููู ุณุฑูุน
      - ูููุฐุฌ ูุตุบุฑ ูุฅุถุงูุฉ ุนููู ุฌุฏูุฏ ุจุณุฑุนุฉ
      - ูุชู ูุชุญูุง ูู ุฃูุณุงู ุงูุญุงุณุจุฉ ุนูุฏ ุงูุจุญุซ ุนู ุนููู ุบูุฑ ููุฌูุฏ
    -->
  <div id="quick-add-modal" class="modal">
    <div class="modal-content small-modal">
      <span class="close" onclick="closeQuickAdd()">&times;</span>
      <h3 data-lang="quick_add_title">โก ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</h3>
      <div class="inputs-grid">
        <input type="text" id="quick-name" data-lang-ph="client_name_ph" placeholder="ุงุณู ุงูุนููู *" required />
        <div style="position: relative">
          <input type="tel" id="quick-phone" data-lang-ph="client_phone_ph" placeholder="ุฑูู ุงููุงุชู" dir="ltr"
            style="text-align: right" maxlength="10" required />
          <small id="phone-feedback"></small>
        </div>
        <input type="text" id="quick-address" data-lang-ph="client_addr_ph" placeholder="ุงูุนููุงู" />
      </div>
      <textarea id="quick-notes" data-lang-ph="client_notes_ph" placeholder="ููุงุญุธุงุช" rows="1"></textarea>
      <!-- ุฒุฑ ุญูุธ ูุงุฎุชูุงุฑ ุงูุนููู -->
      <div>
        <button class="one" onclick="saveQuickClient()" disabled data-lang="btn_save_select">
          ุญูุธ ูุงุฎุชูุงุฑ ุงูุนููู
        </button>
      </div>
    </div>
  </div>

  <!-- 
      ============================================
      ูุงูุจ ุงููุงุชูุฑุฉ ุงููุฎูู (Invoice Template)
      ============================================
      - ูููู HTML ูููุงุชูุฑุฉ ุงูุงุญุชุฑุงููุฉ
      - ูุณุชุฎุฏู ูุฅูุดุงุก PDF ุนูุฏ ุชูุฒูู ุงูููุชูุดู
      - ูุฎูู ูู ุงูุตูุญุฉ ููุง ูุธูุฑ ูููุณุชุฎุฏู
      - ูุชู ููุคู ุจุงูุจูุงูุงุช ุซู ุชุญูููู ูู PDF
    -->
  <div id="invoice-template">
    <div class="invoice-container">
      <!-- 
          ุฑุฃุณ ุงููุงุชูุฑุฉ
          =============
          - ุดุนุงุฑ ูุงุณู ุงูุดุฑูุฉ
          - ูุนูููุงุช ุงูุดุฑูุฉ (ุงูุนููุงูุ TRNุ ุงููุงุชู)
          - ุนููุงู ุงููุงุชูุฑุฉ (QUOTATION)
        -->
      <header class="inv-header">
        <div class="inv-top-row">
          <div class="inv-logo">
            <h1 style="color: #8b4513; margin: 0" data-lang="company_name">
              ุงููุงุฑุณ ููููุฑูุดุงุช
            </h1>
            <h2 style="color: #000; margin: 0; font-size: 16px">
              AL FARIS FURNITURE
            </h2>
          </div>
          <div class="inv-company-info">
            <p><strong>Address:</strong> Naif Road, Deira, Dubai, UAE</p>
            <p><strong>TRN:</strong> 100359849000003</p>
            <p><strong>Tel:</strong> 04-2724240 / 050xxxxxxx</p>
          </div>
          <div class="inv-title-box">
            <h3 id="inv-type-title">QUOTATION</h3>
          </div>
        </div>
        <!-- 
            ุชูุงุตูู ุงููุงุชูุฑุฉ
            ================
            - ุงููุณุงุฑ: ุฑูู ุงููุงุชูุฑุฉุ ุงูุชุงุฑูุฎุ ุงููุดุฑูุน
            - ุงููููู: ูุนูููุงุช ุงูุนููู (ุงูุงุณูุ ุงููุงุชูุ ุงูุนููุงู)
          -->
        <div class="inv-details-grid">
          <div class="box-left">
            <div class="row">
              <strong>Ref No:</strong> <span id="inv-no">---</span>
            </div>
            <div class="row">
              <strong>Date:</strong> <span id="inv-date">---</span>
            </div>
            <div class="row">
              <strong>Project:</strong> <span>Interior Design</span>
            </div>
          </div>
          <div class="box-right">
            <div class="row">
              <strong>Customer:</strong> <span id="inv-client-name">---</span>
            </div>
            <div class="row">
              <strong>Contact:</strong> <span id="inv-client-phone">---</span>
            </div>
            <div class="row">
              <strong>Address:</strong> <span id="inv-client-addr">---</span>
            </div>
          </div>
        </div>
      </header>
      <!-- 
          ุฌุณู ุงููุงุชูุฑุฉ (ุฌุฏูู ุงูููุชุฌุงุช/ุงูุฎุฏูุงุช)
          =====================================
          - ูุนุฑุถ ุชูุงุตูู ุงูุนูุงุตุฑ ุงููุจุงุนุฉ
          - ุฃุนูุฏุฉ: ุงูุฑููุ ุงููุตูุ ุงูููุงุณุ ุงููุญุฏุฉุ ุงููููุฉุ ุณุนุฑ ุงููุญุฏุฉุ ุงููุจูุบุ ุงูุถุฑูุจุฉุ ุงูุฅุฌูุงูู
        -->
      <main class="inv-body">
        <table class="inv-table">
          <thead>
            <tr>
              <th width="5%">No</th>
              <th width="30%">Description</th>
              <th width="15%">Size/Dim</th>
              <th width="8%">Unit</th>
              <th width="8%">QTY</th>
              <th width="10%">Unit Price</th>
              <th width="10%">Amount</th>
              <th width="8%">VAT 5%</th>
              <th width="12%">Gross</th>
            </tr>
          </thead>
          <tbody id="inv-table-body"></tbody>
        </table>
      </main>
      <!-- 
          ุชุฐููู ุงููุงุชูุฑุฉ
          ===============
          - ูุณู ุงููุฌุงููุน: ุงูุฅุฌูุงูู ูุจู ุงูุถุฑูุจุฉุ ุงูุถุฑูุจุฉุ ุงูุฅุฌูุงูู ุงูููุงุฆู
          - ูุชุงุจุฉ ุงููุจูุบ ุจุงูุญุฑูู
          - ูุณู ุงูุชูููุนุงุช: ูุฏูุฑ ุงููุจูุนุงุชุ ููุงููุฉ ุงูุนููู
          - ุฎุชู ุงูุดุฑูุฉ
          - ุดุฑูุท ุงููุงุชูุฑุฉ
        -->
      <footer class="inv-footer">
        <div class="totals-section">
          <div class="total-row">
            <span>Total Before Tax:</span>
            <span id="inv-total-before">0.00</span>
          </div>
          <div class="total-row">
            <span>Total Tax (5%):</span> <span id="inv-total-tax">0.00</span>
          </div>
          <div class="total-row grand-total">
            <span>Grand Total:</span>
            <span id="inv-grand-total">0.00 AED</span>
          </div>
          <div class="amount-in-words" id="inv-words"></div>
        </div>
        <div class="signatures">
          <div class="sig-box">
            <p class="sig-title">Sales Manager</p>
            <p>FAKHR ALDDIN</p>
            <div class="sig-line"></div>
            <p>Signature</p>
          </div>
          <div class="sig-box">
            <p class="sig-title">Customer Approval</p>
            <p id="inv-sig-client">---</p>
            <div class="sig-line"></div>
            <p>Signature</p>
          </div>
          <div class="stamp-area">
            <div style="
                  border: 3px double #1e3a8a;
                  color: #1e3a8a;
                  padding: 10px;
                  font-weight: bold;
                  border-radius: 10px;
                  text-align: center;
                ">
              AL FARIS FURNITURE<br />DUBAI - U.A.E
            </div>
          </div>
        </div>
        <div class="bottom-bar">
          Terms: Goods sold are not returnable | 50% Advance Required | Valid
          for 7 Days
        </div>
      </footer>
    </div>
  </div>

  <!-- 
      ============================================
      ูุงูุฐุฉ ุนุฑุถ ููู ุงูุนููู (Profile Modal)
      ============================================
      - ุชุธูุฑ ุนูุฏ ุงูููุฑ ุนูู ุนููู ูู ุฃู ูุณู
      - ุชุนุฑุถ ุชูุงุตูู ุงูุนููู ุงููุงููุฉ
      - ุชุนุฑุถ ุณุฌู ุงููุนุงููุงุช ููุนููู
      - ุฅููุงููุฉ ุชูุฒูู ููู ุงูุนููู ูู PDF
    -->
  <div id="profile-modal" class="modal">
    <div id="profile-content-box" class="modal-content profile-content">
      <!-- ุฒุฑ ุฅุบูุงู ุงููุงูุฐุฉ -->
      <span class="close no-print" onclick="closeProfileModal()">&times;</span>

      <!-- 
          ุฃุฒุฑุงุฑ ุงูุชุญูู ูู ููู ุงูุนููู
          ===========================
          - ุฒุฑ ุชูุฒูู ููู ุงูุนููู ูู PDF
        -->

      <!-- 
          ุฑุฃุณ ููู ุงูุนููู
          ===============
          - ุตูุฑุฉ ุฑูุฒูุฉ ููุนููู
          - ูุนูููุงุช ุงูุนููู (ุงูุงุณูุ ุงููุงุชูุ ุงูุนููุงู)
          - ุฅุญุตุงุฆูุงุช ุงูุนููู (ุฅุฌูุงูู ุงููุจูุบุ ุงููุฏููุนุ ุงููุชุจูู)
        -->
      <div class="profile-header">
        <div class="p-icon"><i class="fas fa-user-circle"></i></div>
        <div class="p-info">
          <h2 id="p-name">---</h2>
          <p id="p-phone">---</p>
          <p id="p-address" style="font-size: 0.9rem; color: #bbb">---</p>
        </div>
        <div class="p-stats">
          <div class="stat-box">
            <span>ุฅุฌูุงูู ุงููุจูุบ</span>
            <strong id="p-total-spent">0.00</strong>
          </div>
          <div class="stat-box">
            <span>ุงููุฏููุน</span>
            <strong id="p-total-paid">0.00</strong>
          </div>
          <div class="stat-box">
            <span>ุงููุชุจูู</span>
            <strong id="p-total-due" style="color: #e74c3c">0.00</strong>
          </div>
        </div>
      </div>

      <!-- 
          ูุณู ุณุฌู ุงููุนุงููุงุช ููุนููู
          ==========================
          - ูุนุฑุถ ุชุงุฑูุฎ ุฌููุน ูุนุงููุงุช ุงูุนููู
          - ุฌุฏูู ุจุงููุนุงููุงุช: ุงูุชุงุฑูุฎุ ุงูุชูุงุตููุ ุงูุฎุฏูุฉุ ุงููุฏููุนุ ุงูุฅุฌูุงููุ ุงูุญุงูุฉ
        -->
      <h3 style="
            color: var(--gold);
            margin: 20px 0 10px;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
          ">
        <i class="fas fa-history"></i> ุณุฌู ุงููุนุงููุงุช
      </h3>

      <div class="table-container" style="max-height: 400px; overflow-y: auto">
        <table class="history-table" id="profile-table">
          <thead>
            <tr>
              <th>ุงูุชุงุฑูุฎ</th>
              <th>ุงูุบุฑูุฉ / ุงูุชูุงุตูู</th>
              <th>ุงูุฎุฏูุฉ</th>
              <th>ุงููุฏููุน</th>
              <th>ุงูุฅุฌูุงูู</th>
              <th>ุงูุญุงูุฉ</th>
            </tr>
          </thead>
          <tbody id="p-history-body"></tbody>
        </table>
      </div>
      <div class="profile-actions no-print">
        <button class="primary-btn gold" onclick="downloadProfilePDF()">
          <i class="fas fa-file-pdf"></i> ุชูุฒูู ููู ุงูุนููู (PDF)
        </button>
      </div>
    </div>
  </div>

  <!-- 
      ============================================
      ูููุงุช JavaScript ุงูุฏุงุฎููุฉ
      ============================================
      - script.js: ุงูููุฏ ุงูุฑุฆูุณู ููุชุทุจูู
      - curtain-calculator.js: ุฏูุงู ุฎุงุตุฉ ุจุญุงุณุจุฉ ุงูุณุชุงุฆุฑ
    -->
  <script src="script.js"></script>
  <script src="curtain-calculator.js"></script>
  <!-- 
      ============================================
      QUTATION TEMPLATE (PDF GENERATION)
      ============================================
    -->
  <div id="invoice-template">
    <!-- Top Header -->
    <div class="inv-header">
      <div class="inv-title">
        <h1>QUOTATION</h1>
        <p style="margin-top: 10px; font-weight: bold">
          Works Done up to: 7 Days
        </p>
      </div>
      <div class="inv-company-info">
        <h2>Al Faris Furniture</h2>
        <p>TRN: 100XXXXXXXXXXXX</p>
        <p>Tel: +971 50 XXXXXXX</p>
        <p>Address: Sharjah, UAE</p>
      </div>
    </div>

    <!-- Meta Data Grid -->
    <div class="inv-meta-grid">
      <!-- Left Column -->
      <div class="inv-meta-col">
        <div class="meta-row">
          <span class="meta-label">Quotation No:</span>
          <span class="meta-val" id="inv-no">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Date:</span>
          <span class="meta-val" id="inv-date">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Project No:</span>
          <span class="meta-val">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Project Name:</span>
          <span class="meta-val">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">PO No:</span>
          <span class="meta-val">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Description:</span>
          <span class="meta-val" id="inv-desc-title">Curtains & Upholstery</span>
        </div>
      </div>

      <!-- Right Column -->
      <div class="inv-meta-col">
        <div class="meta-row">
          <span class="meta-label">Contract Ref:</span>
          <span class="meta-val">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">PO/MWC/PCO:</span>
          <span class="meta-val">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Customer:</span>
          <span class="meta-val" id="inv-client-name">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Address:</span>
          <span class="meta-val" id="inv-client-addr">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Tax Reg No:</span>
          <span class="meta-val">---</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Phone:</span>
          <span class="meta-val" id="inv-client-phone">---</span>
        </div>
      </div>
    </div>

    <!-- Main Table -->
    <div class="inv-table-container">
      <table id="inv-table">
        <thead>
          <tr>
            <th rowspan="2" style="width: 5%">No.</th>
            <th rowspan="2" style="width: 30%">Description</th>
            <th colspan="2" style="width: 10%">Size</th>
            <th rowspan="2" style="width: 5%">Unit</th>
            <th rowspan="2" style="width: 5%">QTY</th>
            <th rowspan="2" style="width: 10%">Unit Price</th>
            <th rowspan="2" style="width: 10%">Amount Before Tax</th>
            <th rowspan="2" style="width: 5%">Tax (5%)</th>
            <th rowspan="2" style="width: 10%">Tax Amount</th>
            <th rowspan="2" style="width: 10%">Gross Amount</th>
          </tr>
          <tr>
            <th>W</th>
            <th>H</th>
          </tr>
        </thead>
        <tbody id="inv-table-body">
          <!-- Rows will be injected via JS -->
        </tbody>
      </table>
    </div>

    <!-- Footer -->
    <div class="inv-footer">
      <div class="inv-totals">
        <div class="totals-box">
          <div class="total-row">
            <span>Discount:</span>
            <span>0.00</span>
          </div>
          <div class="total-row">
            <span>Total Before Tax:</span>
            <span id="inv-total-before">0.00</span>
          </div>
          <div class="total-row">
            <span>Total TAX (5%):</span>
            <span id="inv-total-tax">0.00</span>
          </div>
          <div class="total-row">
            <span>Grand Total:</span>
            <span id="inv-grand-total">0.00</span>
          </div>
        </div>
      </div>

      <div class="inv-signatures">
        <div class="sig-block">Manager Signature</div>
        <div class="sig-block">Customer Approval</div>
      </div>
    </div>
  </div>
</body>

</html>